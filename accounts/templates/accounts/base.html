{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>
    {% if request.user.is_authenticated %}
        {% if request.user.role == "student" %}
            Student Portal
        {% elif request.user.role == "admin" %}
            Admin Portal
        {% else %}
            User Portal
        {% endif %}
    {% else %}
        Assignment Portal
    {% endif %}
</title>

<!-- Bootstrap CSS & Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<style>
body {
    font-family: 'Poppins', sans-serif;
    background-color: #f5f6fa;
    margin: 0;
}

/* Sidebar Desktop */
@media (min-width: 992px) {
    #sidebarDesktop {
        width: 250px;
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        background-color: #343a40;
        color: #fff;
        padding-top: 56px; /* navbar height */
        z-index: 1020;
    }
    #sidebarDesktop .nav-link {
        color: #fff;
        margin-bottom: 5px;
    }
    #sidebarDesktop .nav-link:hover {
        background-color: #495057;
        border-radius: 5px;
    }

    /* Navbar offset by sidebar */
    .navbar-custom {
        margin-left: 250px; /* sidebar width */
        width: calc(100% - 250px);
    }

    main {
        margin-left: 250px;
        padding: 20px;
        padding-top: 80px; /* navbar height */
    }
}

/* Mobile */
@media (max-width: 991.98px) {
    .navbar-custom {
        margin-left: 0;
        width: 100%;
    }
    main {
        margin-left: 0;
        padding-top: 70px;
    }
}

.navbar-custom {
    background-color: #343a40;
    height: 56px;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1030; /* above sidebar */
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 1rem;
}

.navbar-custom .navbar-brand,
.navbar-custom .btn {
    color: #fff;
}
.navbar-custom .btn:hover {
    background-color: #495057;
}

.nav-link i {
    margin-right: 8px;
}
#sidebarMobile{
     background-color: #343a40;
}
#sidebarMobile a,#sidebarMobile .offcanvas-header button{
     color: #ffff;
}

</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-custom navbar-dark fixed-top">
    <div class="d-flex align-items-center">
        <!-- Desktop Brand -->
        <a class="navbar-brand d-none d-lg-block me-3" href="#">
          
            {% if request.user.role == "student" %}
                Student Portal 
            {% elif request.user.role == "admin" %}
                 Admin Portal
       
            {% endif %}
        </a>
        <!-- Mobile menu button -->
        <button class="btn btn-dark d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMobile">
            <i class="bi bi-list"></i>
        </button>
    </div>

    <!-- Right: Logout -->
    <div class="d-flex ms-auto">
        <a class="btn btn-outline-light" href="{% url 'logout' %}">
            <i class="bi bi-box-arrow-right"></i> Logout
        </a>
    </div>
</nav>

<!-- Sidebar Desktop -->
<div id="sidebarDesktop" class="d-none d-lg-block">
    <ul class="nav flex-column p-2">
            {% if request.user.role == "admin" %}
                <li class="nav-item mb-1">
                     <a class="nav-link" href="{% url 'admin_dashboard' %}"><i class="bi bi-speedometer2"></i> Dashboard</a>
                 </li>
       
             {% endif %}
        <li class="nav-item mb-1">
            <a class="nav-link" href="{% url 'task_list' %}"><i class="bi bi-list-check"></i> Tasks</a>
        </li>
        <li class="nav-item mb-1">
            <a class="nav-link" href="#"><i class="bi bi-book"></i> Courses</a>
        </li>
        <li class="nav-item mb-1">
            <a class="nav-link" href="#"><i class="bi bi-calendar-event"></i> Calendar</a>
        </li>
        <li class="nav-item mb-1">
            <a class="nav-link" href="#"><i class="bi bi-gear"></i> Settings</a>
        </li>
    </ul>
</div>

<!-- Sidebar Mobile -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarMobile">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title text-white">Logo Here</h5>
    <button type="button" class="btn-close text-white" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body d-flex flex-column justify-content-center">
    <ul class="nav flex-column text-center w-100">
      {% if request.user.role == "admin" %}
      <li class="nav-item mb-3">
        <a class="nav-link custom-link" href="{% url 'admin_dashboard' %}">
          <i class="bi bi-speedometer2"></i> Dashboard
        </a>
      </li>
      {% endif %}

      <li class="nav-item mb-3">
        <a class="nav-link custom-link" href="{% url 'task_list' %}">
          <i class="bi bi-list-check"></i> Tasks
        </a>
      </li>
      <li class="nav-item mb-3">
        <a class="nav-link custom-link" href="#">
          <i class="bi bi-book"></i> Courses
        </a>
      </li>
      <li class="nav-item mb-3">
        <a class="nav-link custom-link" href="#">
          <i class="bi bi-calendar-event"></i> Calendar
        </a>
      </li>
      <li class="nav-item mb-3">
        <a class="nav-link custom-link" href="#">
          <i class="bi bi-gear"></i> Settings
        </a>
      </li>
    </ul>
  </div>
</div>

<!-- Main Content -->
<main>
    {% block content %}{% endblock %}
</main>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    {% block scripts %}{% endblock %}
</body>
</html>
